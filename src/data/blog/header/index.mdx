---
title: "Our Site Header: A 10-Step Programme"
date: 2020-06-02
author: Thomas O'Neill
---

import { Demo1, Demo2 } from "./demos"

## Step 1: The "Root > Backdrop + Container" Pattern

Consider the structure of this component tree:

```jsx
<Root>
  <Backdrop />
  <Container>{children}</Container>
</Root>
```

This allows us the following behaviour (tap the menu to open/close):

<iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-1" />

This is side-agnostic:

<iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-1?module=/pages/sideways.js&initialpath=/sideways" />

Toggle menu is courtesy of
[this Framer Motion example](https://codesandbox.io/s/framer-motion-side-menu-mx2rw?module=/src/MenuToggle.tsx)

Mention positioning the elements with CSS.

Mention Framer Motion, better with x y not height width.

## Step 2: Flexible Nav, Multiple Nav's

Our `Root > Backdrop + Container` pattern, along with React state, makes it very
easy to conditionally render this for mobile and bigger.

Nav's tend to be functionally isomorphic yet aesthetically much different when
seen in their many incarnations within websites, e.g. in the mobile vs. the
desktop header vs. in the footer. So we really want flexibility.

The following gets us most of the way there, drag the viewport's width to see
the responsive changes to the header:

<iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-2" />

There are a couple of issues. The most obvious: the mobile nav links are
displayed before the backdrop has finished animating into full view. This is
resolved by animating our links into view, we use a nice stagger animation
courtesy again of Framer Motion:

<iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-3" />

Less obvious is the open -> viewport thingy

For the mobile nav, you do want `<AnimatePresence />` OR transition the display
manually.

`<AnimatePresence />` seems to break the cascading of variants.

<!-- <iframe src="https://codesandbox.io/embed/github/reduxjs/redux/tree/master/examples/todomvc" /> -->

<!-- <iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-00" /> -->

## Step 4: Render props

# Old

## Questions

### Set the scene

- What's the difference between a header and a nav?
- Should I use the same header for mobile and desktop?
- What should I include in the header?
- What makes a good header?
- How is a header/nav different in React/Gatsby?
- ~~Why do I need a header?~~

### Baby steps

- Where do I start with making a header?
- How do I link to internal pages with Gatsby?

### Styling

- How can I show which page the user is currently on?
- How do I make the menu icon transition to an X on mobile?

## Answers

- Same header for mobile and desktop? Re-use where possible!

Semantically, a header
[_"represents introductory content, typically a group of introductory or navigational aids"_](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/header).
Navigation + branding, basically. Also, to me, header implies at the TOP! For a
sidebar, use `<aside>`. `<footer>` for bottom.

The nav's purpose is
[_"purpose is to provide navigation links"_](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/nav).

This is more a question of structure, in terms of HTML and CSS. We use Gatsby
(and therefore React), however, these concepts are somewhat
language/framework-agnostic.

### Assumptions

- This is responsive, for mobile and desktop (this is a core requirement)

### Questi-questions

How can I write my header/nav such that it is as X, Y, Z as possible (re-usable,
general, works for mobile/desktop but customizable too).

It's always something in between perfect abstraction and disposable mess.

## Intro

A preparedness to re-visit first principles. Baby steps.

## Key Points

- If element is positioned (absolute, fixed, sticky), mx-auto only works if left
  and right are 0 (tailwind rule inset-x-0)
