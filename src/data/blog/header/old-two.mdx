---
title: "A Simple and Reusable Navigation Header"
date: 2020-06-02
author: Thomas O'Neill
---

Most every developer knows the bane of underestimation. The site's navigation
mechanism may be the greatest, most easily underestimated pitfall in basic
website development.

It is, in theory, so simple, foundational. But let's say we demand the following
of our navigation:

- It must have elegant route transitions
- It must account for all viewport sizes
- The code must be reusable, readable

Proof that this recipe is food for banging your head against a wall for many
months in succession is left as an exercise for the reader. Suffice to say we've
been through this, and here we're sharing what we've ended up with.

## Tl;dr Here's the Code

You can drag the viewport narrower and click between the navigation links for
the two pages:

<!-- <iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-3" /> -->

Let's assess what we've got:

1. Two different active link animations
2. ...

## Here's How it Works

There are really two key patterns we use to make this happen

### Pattern #1: The "Root > Backdrop + Container" Pattern

Consider the structure of this component tree:

```jsx
<Root>
  <Backdrop />
  <Container>{children}</Container>
</Root>
```

This allows us the following behaviour (tap the menu to open/close):

<!-- <iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-1" /> -->

This is side-agnostic:

<!-- <iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-1?module=/pages/sideways.js&initialpath=/sideways" /> -->

Toggle menu is courtesy of
[this Framer Motion example](https://codesandbox.io/s/framer-motion-side-menu-mx2rw?module=/src/MenuToggle.tsx)

Mention positioning the elements with CSS.

Z-index stuff: the menu > the container > the backdrop > the content

Mention Framer Motion, better with x y not height width.

### Pattern #2: Function as Child Component Nav

(update below for having active link color and underline too)

As of time of writing, `<AnimateSharedLayout />` is in beta. This works with
`2.0.0-beta.59` but not `2.0.0-beta.73`. Furthermore, it seems to only work if
the container is flex.

<!-- <iframe src="https://codesandbox.io/embed/github/mysterybear/blog-post-demos/tree/master/packages/header-3" /> -->
